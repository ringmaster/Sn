import{a as g,t as h}from"../chunks/disclose-version.CJGUqitJ.js";import{h as A,Y as U,Z as V,_ as W,$ as Z,i as C,j as F,t as k,k as H,y as v,l as i,m as d,o as _,D as c,a0 as L}from"../chunks/runtime.Do8c63dZ.js";import{e as q,s as $}from"../chunks/render.jsJNfXpn.js";import{i as D}from"../chunks/if.DAzU6LWl.js";import{s as Q,i as X,a as ee}from"../chunks/store.C0txGVhR.js";import{d as te,f as E}from"../chunks/store.B-SeYspd.js";let I=!1;function Y(){I||(I=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function N(e){if(A){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var o=e.value;O(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var a=e.checked;O(e,"checked",null),e.checked=a}}};e.__on_r=r,U(r),Y()}}function O(e,t,r,o){var a=e.__attributes??(e.__attributes={});A&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=r)&&(t==="loading"&&(e[V]=r),e.removeAttribute(t))}function ae(e,t,r,o=r){e.addEventListener(t,r);const a=e.__on_r;a?e.__on_r=()=>{a(),o()}:e.__on_r=o,Y()}function T(e,t,r=t){var o=W();ae(e,"input",()=>{var a=j(e)?B(e.value):e.value;r(a),o&&a!==(a=t())&&(e.value=a??"")}),Z(()=>{var a=t();if(A&&e.defaultValue!==e.value){r(e.value);return}j(e)&&a===B(e.value)||e.type==="date"&&!a&&!e.value||(e.value=a??"")})}function j(e){var t=e.type;return t==="number"||t==="range"}function B(e){return e===""?null:+e}var re=h('<div class="mb-4"><div class="container mx-auto px-4 text-center"><h2 class="text-xl font-bold mb-4 text-center"> </h2></div> <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Logout</button></div>'),oe=h('<p class="mt-4 text-center text-red-500"> </p>'),se=h('<form class="w-full max-w-sm mx-auto mt-8"><div class="mb-4"><label class="block text-gray-700 text-sm font-bold mb-2" for="username">Username</label> <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="username" type="text" required autocomplete="username"></div> <div class="mb-6"><label class="block text-gray-700 text-sm font-bold mb-2" for="password">Password</label> <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" id="password" type="password" required autocomplete="current-password"></div> <div class="flex items-center justify-between"><button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="submit">Login</button></div> <!></form>'),ne=h('<div class="container mx-auto px-4"><h1 class="text-2xl font-bold mb-4 text-center"> </h1></div> <!>',1);function ve(e,t){C(t,!1);const r=Q(),o=()=>ee(te,"$dataStore",r);let a=L(""),x=L(""),u=L("");async function z(f){f.preventDefault();const s=btoa(`${v(a)}:${v(x)}`),n=await fetch("./api",{method:"POST",headers:{Authorization:`Basic ${s}`}});if(n.ok)try{let l=JSON.parse(await n.text());l.loggedIn?c(u,`Logged in as ${l.username}`):c(u,"Login failed. Please check your credentials.")}catch{c(u,"Login request failed.")}else c(u,"Login failed. Please check your credentials.");E()}async function G(){(await fetch("./api",{method:"DELETE"})).ok?c(u,"Logged out successfully."):c(u,"Logout request failed."),E()}X();var P=ne(),y=F(P),S=i(y),J=i(S);d(S),d(y);var K=_(y,2);D(K,()=>o().loggedIn,f=>{var s=re(),n=i(s),l=i(n),m=i(l);d(l),d(n);var b=_(n,2);d(s),k(()=>$(m,`Welcome, ${o().username??""}!`)),q("click",b,G),g(f,s)},f=>{var s=se(),n=i(s),l=_(i(n),2);N(l),d(n);var m=_(n,2),b=_(i(m),2);N(b),d(m);var M=_(m,4);D(M,()=>v(u),p=>{var w=oe(),R=i(w);d(w),k(()=>$(R,v(u))),g(p,w)}),d(s),T(l,()=>v(a),p=>c(a,p)),T(b,()=>v(x),p=>c(x,p)),q("submit",s,z),g(f,s)}),k(()=>$(J,o().title)),g(e,P),H()}export{ve as component};
